Use the date from debian/changelog instead of the current date in generated
documentation. This allows support for reproducible builds.
Index: iputils/doc/Makefile
===================================================================
--- iputils.orig/doc/Makefile
+++ iputils/doc/Makefile
@@ -1,5 +1,6 @@
 SHELL:=/bin/bash #required for pushd and popd
 
+BUILD_DATE=$(shell dpkg-parsechangelog -S Date -l../debian/changelog | LC_ALL=C date -u "+%d %B %Y" -f -)
 SGMLFILES=$(shell echo *.sgml)
 HTMLFILES=$(subst .sgml,.html,$(SGMLFILES)) index.html
 MANFILES=$(subst .sgml,.8,$(SGMLFILES))
@@ -43,7 +44,7 @@ iputils.html: iputils.db
 $(MANFILES): index.db
 	@set -e; \
 	$(SETUP_TMPDIR); \
-	nsgmls ../$< | sgmlspl ../docbook2man-spec.pl; \
+	nsgmls ../$< | sgmlspl ../docbook2man-spec.pl "$(BUILD_DATE)"; \
 	mv $@ ..; \
 	$(CLEAN_TMPDIR)
 
Index: iputils/doc/docbook2man-spec.pl
===================================================================
--- iputils.orig/doc/docbook2man-spec.pl
+++ iputils/doc/docbook2man-spec.pl
@@ -266,7 +266,7 @@ sgml('</REFMETA>', sub {
 .\\" etc. to Steve Cheng <steve\@ggi-project.org>.
 _END_BANNER
 
-	my $manpage_date = `date "+%d %B %Y"`;
+	my $manpage_date = (@ARGV == 1) ? $ARGV[0] : `date "+%d %B %Y"`;
 		
 	output '.TH "';
 	
@@ -280,7 +280,7 @@ _END_BANNER
 	}
 	
 	output  '" "', fold_string($manpage_sect), 
-		'" "', fold_string(`date "+%d %B %Y"`), 
+		'" "', fold_string($manpage_date), 
 		'" "', $manpage_misc, 
 		'" "', $manpage_manual, 
 		"\"\n";
