--- iputils-upstream/tracepath.c	2007-10-28 12:24:10.000000000 -0400
+++ iputils/tracepath.c	2007-10-28 12:19:17.000000000 -0400
@@ -309,9 +309,9 @@
 		base_port = atoi(p+1);
 	} else
 		base_port = 44444;
-	he = gethostbyname(argv[0]);
+	he = gethostbyname2(argv[0], AF_INET);
 	if (he == NULL) {
-		herror("gethostbyname");
+		herror("gethostbyname2");
 		exit(1);
 	}
 	memcpy(&target.sin_addr, he->h_addr, 4);
--- iputils-upstream/ping.c	2007-10-28 12:24:10.000000000 -0400
+++ iputils/ping.c	2007-10-28 12:19:18.000000000 -0400
@@ -242,7 +242,7 @@
 			if (argc == 1)
 				options |= F_NUMERIC;
 		} else {
-			hp = gethostbyname(target);
+			hp = gethostbyname2(target, AF_INET);
 			if (!hp) {
 				fprintf(stderr, "ping: unknown host %s\n", target);
 				exit(2);
